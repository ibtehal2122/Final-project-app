# ==================================================================
# ğŸŒ GLOBAL CONFIGURATION
# ==================================================================
global:
  region: us-east-1
  accountId: "330857833030"
# ==================================================================
# ğŸ³ IMAGES CONFIGURATION
# Note: We use the SAME repo for both, but different tags.
# ==================================================================
images:
  registry: 330857833030.dkr.ecr.us-east-1.amazonaws.com
  repository: ebtehal-final-eks-repo # ğŸ‘ˆ Your specific repo name
  pullPolicy: Always
# ==================================================================
# âš™ï¸ BACKEND CONFIGURATION
# ==================================================================
backend:
  tag: "backend-8f4fbefe13bfb42e4441a14c0402b5c949efbea8" # Pipeline will update this (e.g., backend-sha123)
  replicaCount: 1
  service:
    port: 5000
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
# ==================================================================
# ğŸ¨ FRONTEND CONFIGURATION
# ==================================================================
frontend:
  tag: "frontend-latest" # Pipeline will update this
  replicaCount: 1
  service:
    port: 80
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
# ==================================================================
# ğŸ—„ï¸ DATABASE CONFIGURATION (PostgreSQL)
# ==================================================================
database:
  image: postgres:15
  storage:
    size: 1Gi
    class: gp2
  credentials:
    name: microservices_db
    user: postgres
    password: postgres # âš ï¸ In prod, use external Secrets
# ==================================================================
# â° BACKUP CONFIGURATION (CronJob)
# ==================================================================
backup:
  enabled: true
  schedule: "0 0 * * *" # Runs every day at midnight
  s3Bucket: "ebtehal-backup-bucket-2026" # âš ï¸ CHANGE THIS to your unique bucket name
  aws:
    accessKeyId: "" # Leave empty here; we will inject via Secrets or Pipeline
    secretAccessKey: "" # Leave empty here; we will inject via Secrets or Pipeline
# ==================================================================
# ğŸš¦ INGRESS CONFIGURATION
# ==================================================================
ingress:
  enabled: true
  className: nginx
# ==================================================================
# ğŸ›¡ï¸ SECURITY & POLICY (Kyverno)
# ==================================================================
security:
  cosign:
    # Ø¯Ù‡ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ù„ÙŠ Kyverno Ù‡ÙŠØ³ØªØ®Ø¯Ù…Ù‡ Ø¹Ø´Ø§Ù† ÙŠØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„ØµÙˆØ±Ø© Ø¨ØªØ§Ø¹ØªÙƒ
    # âš ï¸ Ø§Ù†Ø³Ø®ÙŠ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… (cosign.pub) ÙˆØ­Ø·ÙŠÙ‡ Ù‡Ù†Ø§
    publicKey: |-
      -----BEGIN PUBLIC KEY-----
      MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE... (Ø­Ø·ÙŠ Ù…ÙØªØ§Ø­Ùƒ Ù‡Ù†Ø§)
      -----END PUBLIC KEY-----


#455